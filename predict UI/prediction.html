<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Quản lý lớp học</title>
    <link rel="icon" href="" type="">

    <link rel="stylesheet" href="css/bootstrap1.min.css" />

    <link rel="stylesheet" href="vendors/themefy_icon/themify-icons.css" />

    <link rel="stylesheet" href="vendors/swiper_slider/css/swiper.min.css" />

    <link rel="stylesheet" href="vendors/select2/css/select2.min.css" />

    <link rel="stylesheet" href="vendors/niceselect/css/nice-select.css" />

    <link rel="stylesheet" href="vendors/owl_carousel/css/owl.carousel.css" />

    <link rel="stylesheet" href="vendors/gijgo/gijgo.min.css" />

    <link rel="stylesheet" href="vendors/font_awesome/css/all.min.css" />
    <link rel="stylesheet" href="vendors/tagsinput/tagsinput.css" />

    <link rel="stylesheet" href="vendors/datatable/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="vendors/datatable/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="vendors/datatable/css/buttons.dataTables.min.css" />

    <link rel="stylesheet" href="vendors/text_editor/summernote-bs4.css" />

    <link rel="stylesheet" href="vendors/morris/morris.css">

    <link rel="stylesheet" href="vendors/material_icon/material-icons.css" />

    <link rel="stylesheet" href="css/metisMenu.css">

    <link rel="stylesheet" href="css/style1.css" />
    <link rel="stylesheet" href="css/colors/default.css" id="colorSkinCSS">

    <!-- Thêm thư viện jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Thêm thư viện jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>







    


</head>

<body class="crm_body_bg">
    
    <div id="sidebar"></div>

    <section class="main_content dashboard_part">
        <div class="container-fluid g-0">
            <ul>

            </ul>
        </div>

        <div class="main_content_iner">   

            <div class="container-fluid plr_30 body_white_bg pt_30">
                <div class="row justify-content-center">
                    <div class="col-12">
                        <div class="QA_section">
                            <div class="white_box_tittle list_header" style="background-color: #303E62;">
                                <h4 style="color: #FFFFFF; margin-left: 20px;">Lớp học</h4>
                                <!-- Search Form OLD-->
                                <div class="">                         
                                   <div class="search-container">
                                            <input type="text" id="search_input" placeholder="Tìm kiếm...">
                                            <button id="search_course" type="button">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                                    <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
                                                </svg>
                                            </button>
                                    </div>          
                                </div>
                            </div>

                            <div class="class_list">
                                <table class="table lms_table_active">
                                    <thead>
                                        <tr>
                                            <th scope="col">Mã Lớp</th>
                                            <th scope="col">Khóa học</th>
                                            <th scope="col">Cơ sở</th>
                                            <th scope="col">Hình thức giảng dạy</th>
                                            <th scope="col">Trạng thái</th>
                                            <th scope="col">Ngày bắt đầu</th>
                                            <th scope="col">Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td class="content">NPS-PTB06</td>
                                            <td class="content">Python</td>
                                            <td class="content">107 NPS</td>
                                            <td class="content">Runing</td>
                                            <td class="content">1/4/2024</td>
                                            <td>
                                                <a href="#" style="font-size: 1.5rem; cursor: pointer;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em"
                                                        viewBox="0 0 576 512"> Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.
                                                        <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/></svg>                          
                                                </a>
                                                <a onclick=""
                                                    style="font-size: 1.5rem; cursor: pointer;"><svg
                                                        xmlns="http://www.w3.org/2000/svg" height="1em"
                                                        viewBox="0 0 512 512"> Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc. 
                                                        <path
                                                            d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z" />
                                                    </svg>
                                                </a>
                                            </td>                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!--table results -->
                            <div class="class_list">
                                <h4 style="color: black; margin-left: 20px;">Dự báo</h4>
                                <table class="table lms_table_active result_courses">
                                    <thead>
                                        <tr>
                                            <th scope="col">Mã Lớp</th>
                                            <th scope="col">Khóa học</th>
                                            <th scope="col">Cơ sở</th>
                                            <th scope="col">Hình thức giảng dạy</th>
                                            <th scope="col">Trạng thái</th>
                                            <th scope="col">Ngày bắt đầu</th>
                                            <th scope="col">Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td class="content"></td>
                                            <td class="content"></td>
                                            <td class="content"></td>
                                            <td class="content"></td>
                                            <td class="content"></td>
                                            <td>
                                                <a onclick="prediction_function(this)" href="#" style="font-size: 1.5rem; cursor: pointer;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                                        <path d="M96 80c0-26.5 21.5-48 48-48H432c26.5 0 48 21.5 48 48V384H96V80zm313 47c-9.4-9.4-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L409 161c9.4-9.4 9.4-24.6 0-33.9zM0 336c0-26.5 21.5-48 48-48H64V416H512V288h16c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V336z"/></svg>                          
                                                    </a>
                                                <a onclick=""
                                                    style="font-size: 1.5rem; cursor: pointer;"><svg
                                                        xmlns="http://www.w3.org/2000/svg" height="1em"
                                                        viewBox="0 0 512 512"> Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. 
                                                        <path
                                                            d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z" />
                                                    </svg></a>
                                            </td>                                            
                                        </tr>                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> 

                    <!--THÔNG TIN HỌC VIÊN DỰ BÁO-->
                    <div class="col-12">
                        <table class="table result_student">
                            <thead>
                                <tr>
                                    <th scope="col">Họ tên</th>
                                    <th scope="col">Hình thức học</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Số điện thoại</th>
                                    <th scope="col">Trạng thái</th>
                                    <th scope="col">Dự đoán</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Võ Minh Nguyên</td>
                                    <td class="content"></td>
                                    <td class="content"></td>
                                    <td class="content"></td>
                                    <td class="content"></td>
                                    <td>
                                        <a id = "" href="#" style="font-size: 1.5rem; cursor: pointer;">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                            <path d="M96 80c0-26.5 21.5-48 48-48H432c26.5 0 48 21.5 48 48V384H96V80zm313 47c-9.4-9.4-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L409 161c9.4-9.4 9.4-24.6 0-33.9zM0 336c0-26.5 21.5-48 48-48H64V416H512V288h16c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V336z"/></svg>                          
                                        </a>
                                    </td>                                    
                                </tr>
                            </tbody>
                        </table>
                    </div>
       
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                fetch('backend/get_data.php?table=courses')
                    .then(response => response.json())
                    .then(data => {
                        let DivtoClone = document.querySelector("table.table.lms_table_active tbody tr").cloneNode(true);
                        document.querySelector("table.table.lms_table_active tbody tr").remove()
                        data.forEach(item => {
                            let cloneDiv = DivtoClone.cloneNode(true)
                            td = cloneDiv.querySelectorAll('td')
                            td[0].textContent = item.id
                            td[1].textContent = item.name
                            td[2].textContent = item.centre
                            td[3].textContent = item.method
                            td[4].textContent = item.STATUS
                            td[5].textContent = item.startDate
                            //td[6].querySelectorAll('a')[1].href = `../backend/delete.php?flight=`+item.id
                            document.querySelector("table.table.lms_table_active tbody").appendChild(cloneDiv)                            
                        })
                })
            })  

            function prediction_function(element) {
                var searchResults = {}
                fetch('backend/get_data.php?table=student_performance')
                    .then(response => response.json())
                    .then(data => {
                    let DivtoClone = document.querySelector("table.result_student tbody tr").cloneNode(true);
                    document.querySelector("table.result_student tbody tr").remove();
                    var class_id = document.querySelector('#search_input').value;
                    var searchResults = data.filter(item => item.course === class_id);
                    console.log(searchResults);                
                    var convertedData = {};
                    searchResults = searchResults.forEach(item => {
                        let cloneDiv = DivtoClone.cloneNode(true);
                        let td = cloneDiv.querySelectorAll('td');
                        td[0].textContent = item.name;
                        td[1].textContent = item.method;
                        td[2].textContent = item.email;
                        td[3].textContent = item.number;
                        td[4].textContent = item.status; 
                        convertedData["data"] = [
                        parseFloat(item.diemTD),
                        parseFloat(item.diemCT),
                        parseFloat(item.diemTTMT),
                        parseFloat(item.diemGQVD),
                        parseFloat(item.diemKT1),
                        parseFloat(item.diemKT2),
                        parseFloat(item.diemCK),
                        ];
                        fetch('http://127.0.0.1:5000/predict', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(convertedData)
                            })
                            .then(response => response.json())
                            .then(prediction => {
                            // Xử lý kết quả dự đoán tại đây
                            console.log(`Prediction for index :`, prediction);
                            td[5].textContent = prediction["Kết quả"];
                            })
                            .catch(error => {
                            console.error(`Error for index :`, error);
                            });                        
                        document.querySelector("table.result_student tbody").appendChild(cloneDiv);
                    });                   
                });                
            }


                



        </script>


        <div class="footer_part">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-sm-12">
                        <div class="footer_iner text-center">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>



    



    <script src="js/jquery1-3.4.1.min.js"></script>

    <script src="js/popper1.min.js"></script>

    <script src="js/bootstrap1.min.js"></script>

    <script src="js/metisMenu.js"></script>

    <script src="vendors/count_up/jquery.waypoints.min.js"></script>

    <script src="vendors/chartlist/Chart.min.js"></script>

    <script src="vendors/count_up/jquery.counterup.min.js"></script>

    <script src="vendors/swiper_slider/js/swiper.min.js"></script>

    <script src="vendors/niceselect/js/jquery.nice-select.min.js"></script>

    <script src="vendors/owl_carousel/js/owl.carousel.min.js"></script>

    <script src="vendors/gijgo/gijgo.min.js"></script>

    <script src="vendors/datatable/js/jquery.dataTables.min.js"></script>
    <script src="vendors/datatable/js/dataTables.responsive.min.js"></script>
    <script src="vendors/datatable/js/dataTables.buttons.min.js"></script>
    <script src="vendors/datatable/js/buttons.flash.min.js"></script>
    <script src="vendors/datatable/js/jszip.min.js"></script>
    <script src="vendors/datatable/js/pdfmake.min.js"></script>
    <script src="vendors/datatable/js/vfs_fonts.js"></script>
    <script src="vendors/datatable/js/buttons.html5.min.js"></script>
    <script src="vendors/datatable/js/buttons.print.min.js"></script>
    <script src="js/chart.min.js"></script>

    <script src="vendors/progressbar/jquery.barfiller.js"></script>

    <script src="vendors/tagsinput/tagsinput.js"></script>

    <script src="vendors/text_editor/summernote-bs4.js"></script>
    <script src="vendors/apex_chart/apexcharts.js"></script>

    <script src="js/custom.js"></script>
    


    <script src="js/active_chart.js"></script>
    <script src="vendors/apex_chart/radial_active.js"></script>
    <script src="vendors/apex_chart/stackbar.js"></script>
    <script src="vendors/apex_chart/area_chart.js"></script>
    <script src="vendors/apex_chart/bar_active_1.js"></script>
    <script src="vendors/chartjs/chartjs_active.js"></script>
   





    
</body>

</html>